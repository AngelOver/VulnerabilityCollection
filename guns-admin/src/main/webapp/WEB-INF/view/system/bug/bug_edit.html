@layout("/common/_container.html"){
<script src="${ctxPath}/static/js/common/web-upload-object2.js"></script>
<div class="ibox float-e-margins">
    <div class="ibox-content">
        <div class="form-horizontal">

            <div class="row">
                <div class="col-sm-6 b-r">
                            <input id="id" name="ID" value="${item.id}" type="hidden"/>
                            <#input id="code" name="漏洞编号" value="${item.code}" underline="true"/>
                            <#input id="codeDesc" name="归属CWE" value="${item.codeDesc}" underline="true"/>
                            <#input id="describe" name="漏洞描述" value="${item.describe}" />
                </div>

                <div class="col-sm-6">
                
                
                                
<div class="form-group">
    <label class="col-sm-3 control-label ">对比文件</label>
     <div class="col-sm-9">
    
    <div class="col-sm-8" style="display:flex; justify-content:space-betweent;align-items:center;height: 31px;
    border-bottom: 1px solid #e5e6e7;">
        <div id="diffFilePreId"  style="display:flex; justify-content:space-betweent;align-items:center;">
            <div id="txt_div" >  暂无文件  <!--  <a>文件</a> <a style="margin-left:5px">删除</a> -->
             </div>
              
        </div>
    </div>
    <div class="col-sm-2">
        <div class=" upload-btn" id="diffFileBtnId">
            <i class="fa fa-upload"></i>&nbsp;上传
        </div>
    </div>
    
    <input type="hidden" id="diffFile" value="${item.diffFile}"/>
	 </div>
</div>
                     <div class="hr-line-dashed"></div>      
                
                
                           <!--  <#input id="diffFile" name="对比文件" value="${item.diffFile}" underline="true"/> -->
                            <#input id="influence" name="漏洞影响" value="${item.influence}" underline="true"/>
                            <#input id="otherlink" name="参考" value="${item.otherlink}" />
                </div>
            </div>

            <div class="row btn-group-m-t">
                <div class="col-sm-10">
                    <#button btnCss="info" name="提交" id="ensure" icon="fa-check" clickFun="BugInfoDlg.editSubmit()"/>
                    <#button btnCss="danger" name="取消" id="cancel" icon="fa-eraser" clickFun="BugInfoDlg.close()"/>
                </div>
            </div>
        </div>

    </div>
</div>
<script src="${ctxPath}/static/modular/system/bug/bug_info.js"></script>
<script>

$(function(){
	var file = "${item.diffFile}";
	if(""!=file){
		$("#txt_div").empty().append("暂无文件");
		_htmL=' <a onclick="dow(\''+file+'\')">'+file+'</a> <a onclick="del()" style="margin-left:5px">删除</a>'
		$("#txt_div").empty().append(_htmL);
	}
	
});

function dow(url){
	console.log(url);
	var href =top.window.location.href;
	var PATH=href+"kaptcha/";
	url =  PATH+ url;
	console.log(url);
	var   link = document.createElement('a');
	link.setAttribute("download", "");
	link.href = url;
	link.click();
	 Feng.success("正在下载，请等待！");

}
function del(){
	$("#txt_div").empty().append("暂无文件");
	$("#diffFile").val("");
	console.log("删除成功");
}

</script>
@}
